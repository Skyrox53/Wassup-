project-root/
├── public/
│   ├── index.html         <-- ton fichier HTML ici (renommé depuis Wassup Html)
│   └── uploads/           <-- pour stocker les photos de profil
├── server.js              <-- backend Node.js
├── package.json           <-- fichier npm (créé avec npm init)

<!-- index.html -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wassup!</title>
</head>
<body>
  <h1>Profil</h1>
  <form id="profileForm" enctype="multipart/form-data">
    <label>Bio: <input type="text" name="bio" /></label><br />
    <label>Citation: <input type="text" name="citation" /></label><br />
    <label>Photo de profil: <input type="file" name="photo" /></label><br />
    <label>Rendre le profil public?
      <input type="checkbox" name="isPublic" />
    </label><br />
    <button type="submit">Sauvegarder</button>
  </form>

  <script>
    const form = document.getElementById('profileForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);

      try {
        const res = await fetch('http://localhost:3000/api/save-profile', {
          method: 'POST',
          body: formData
        });
        const data = await res.json();
        if (data.success) alert('Profil sauvegardé !');
      } catch (err) {
        console.error(err);
        alert('Erreur lors de la sauvegarde');
      }
    });
  </script>
</body>
</html>

// package.json
{
  "name": "wassup-app",
  "version": "1.0.0",
  "description": "Application Wassup! (chat, profils, explorer...)",
  "main": "server.js",
  "scripts": {
    "start": "node server.js"
  },
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.18.2",
    "multer": "^1.4.5"
  }
}

// server.js
const express = require('express');
const multer = require('multer');
const cors = require('cors');
const fs = require('fs');
const path = require('path');

const app = express();
const PORT = 3000;

app.use(cors());
app.use(express.static('public'));
app.use(express.json());

const upload = multer({ dest: 'public/uploads/' });

let profiles = [];

app.post('/api/save-profile', upload.single('photo'), (req, res) => {
  const { bio, citation, isPublic } = req.body;
  let photoUrl = '';

  if (req.file) {
    photoUrl = '/uploads/' + req.file.filename;
  }

  const newProfile = {
    id: Date.now(),
    bio,
    citation,
    isPublic: isPublic === 'true',
    photoUrl
  };

  const existing = profiles.findIndex(p => p.id === newProfile.id);
  if (existing >= 0) profiles[existing] = newProfile;
  else profiles.push(newProfile);

  res.status(200).json({ success: true });
});

app.get('/api/public-profiles', (req, res) => {
  const publicProfiles = profiles.filter(p => p.isPublic);
  res.json(publicProfiles);
});

app.listen(PORT, () => {
  console.log(`Serveur démarré sur http://localhost:${PORT}`);
});
